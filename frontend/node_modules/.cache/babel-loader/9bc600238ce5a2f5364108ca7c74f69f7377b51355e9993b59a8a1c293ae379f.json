{"ast":null,"code":"import Dexie from 'dexie';\n\n// Offline database for caching / قاعدة بيانات غير متصلة للتخزين المؤقت\nclass OfflineDatabase extends Dexie {\n  constructor() {\n    super('AidTraceDB');\n    this.version(1).stores({\n      projects: '++id, title, status, organisation, location',\n      users: '++id, username, email, role, organisation',\n      transactions: '++id, project_id, donor_id, amount, is_synced',\n      reports: '++id, project_id, submitted_by, type, title, is_synced',\n      distributions: '++id, project_id, field_officer_id, aid_type, is_synced',\n      organisations: '++id, name, type, registration_status',\n      syncQueue: '++id, type, timestamp, retries',\n      offlineActions: '++id, action_type, timestamp, is_synced'\n    });\n  }\n}\nconst db = new OfflineDatabase();\n\n// Offline service functions / وظائف الخدمة غير المتصلة\nexport const offlineService = {\n  // Cache data / تخزين البيانات مؤقتاً\n  async cacheProjects(projects) {\n    try {\n      await db.projects.clear();\n      await db.projects.bulkAdd(projects);\n    } catch (error) {\n      console.warn('Failed to cache projects:', error);\n    }\n  },\n  async cacheUsers(users) {\n    try {\n      await db.users.clear();\n      await db.users.bulkAdd(users);\n    } catch (error) {\n      console.warn('Failed to cache users:', error);\n    }\n  },\n  async cacheOrganisations(organisations) {\n    try {\n      await db.organisations.clear();\n      await db.organisations.bulkAdd(organisations);\n    } catch (error) {\n      console.warn('Failed to cache organisations:', error);\n    }\n  },\n  // Get cached data / الحصول على البيانات المخزنة مؤقتاً\n  async getCachedProjects() {\n    try {\n      return await db.projects.toArray();\n    } catch (error) {\n      console.warn('Failed to get cached projects:', error);\n      return [];\n    }\n  },\n  async getCachedUsers() {\n    try {\n      return await db.users.toArray();\n    } catch (error) {\n      console.warn('Failed to get cached users:', error);\n      return [];\n    }\n  },\n  async getCachedOrganisations() {\n    try {\n      return await db.organisations.toArray();\n    } catch (error) {\n      console.warn('Failed to get cached organisations:', error);\n      return [];\n    }\n  },\n  // Store offline actions / تخزين الإجراءات غير المتصلة\n  async storeOfflineAction(actionType, data) {\n    try {\n      const action = {\n        action_type: actionType,\n        data: JSON.stringify(data),\n        timestamp: new Date().toISOString(),\n        is_synced: false\n      };\n      const id = await db.offlineActions.add(action);\n      return {\n        ...action,\n        id\n      };\n    } catch (error) {\n      console.warn('Failed to store offline action:', error);\n      return null;\n    }\n  },\n  // Get pending sync actions / الحصول على الإجراءات المعلقة للمزامنة\n  async getPendingSyncActions() {\n    try {\n      return await db.offlineActions.where('is_synced').equals(false).toArray();\n    } catch (error) {\n      console.warn('Failed to get pending sync actions:', error);\n      return [];\n    }\n  },\n  // Mark action as synced / تحديد الإجراء كمتزامن\n  async markActionSynced(actionId) {\n    try {\n      await db.offlineActions.update(actionId, {\n        is_synced: true\n      });\n    } catch (error) {\n      console.warn('Failed to mark action as synced:', error);\n    }\n  },\n  // Store form draft / تخزين مسودة النموذج\n  async storeDraft(formType, data) {\n    try {\n      const draft = {\n        type: formType,\n        data: JSON.stringify(data),\n        timestamp: new Date().toISOString(),\n        retries: 0\n      };\n      const id = await db.syncQueue.add(draft);\n      return {\n        ...draft,\n        id\n      };\n    } catch (error) {\n      console.warn('Failed to store draft:', error);\n      return null;\n    }\n  },\n  // Get form drafts / الحصول على مسودات النماذج\n  async getDrafts(formType) {\n    try {\n      return await db.syncQueue.where('type').equals(formType).toArray();\n    } catch (error) {\n      console.warn('Failed to get drafts:', error);\n      return [];\n    }\n  },\n  // Clear synced drafts / مسح المسودات المتزامنة\n  async clearSyncedDrafts() {\n    try {\n      const syncedActions = await db.offlineActions.where('is_synced').equals(true).toArray();\n      const idsToDelete = syncedActions.map(action => action.id);\n      if (idsToDelete.length > 0) {\n        await db.offlineActions.bulkDelete(idsToDelete);\n      }\n    } catch (error) {\n      console.warn('Failed to clear synced drafts:', error);\n    }\n  },\n  // Check if data exists offline / التحقق من وجود البيانات غير متصلة\n  async hasOfflineData() {\n    try {\n      const projectsCount = await db.projects.count();\n      const usersCount = await db.users.count();\n      return projectsCount > 0 || usersCount > 0;\n    } catch (error) {\n      console.warn('Failed to check offline data:', error);\n      return false;\n    }\n  },\n  // Clear all offline data / مسح جميع البيانات غير المتصلة\n  async clearAllData() {\n    try {\n      await db.projects.clear();\n      await db.users.clear();\n      await db.transactions.clear();\n      await db.reports.clear();\n      await db.distributions.clear();\n      await db.organisations.clear();\n      await db.syncQueue.clear();\n      await db.offlineActions.clear();\n    } catch (error) {\n      console.warn('Failed to clear all data:', error);\n    }\n  }\n};\n\n// Sync service for online/offline synchronization / خدمة المزامنة للمزامنة المتصلة/غير المتصلة\nexport const syncService = {\n  // Check online status / التحقق من حالة الاتصال\n  isOnline() {\n    return navigator.onLine;\n  },\n  // Sync pending actions when online / مزامنة الإجراءات المعلقة عند الاتصال\n  async syncPendingActions(apiService) {\n    if (!this.isOnline()) return;\n    const pendingActions = await offlineService.getPendingSyncActions();\n    for (const action of pendingActions) {\n      try {\n        const data = JSON.parse(action.data);\n        switch (action.action_type) {\n          case 'CREATE_PROJECT':\n            await apiService.createProject(data);\n            break;\n          case 'FUND_PROJECT':\n            await apiService.fundProject(data);\n            break;\n          case 'SUBMIT_REPORT':\n            await apiService.submitReport(data);\n            break;\n          case 'RECORD_DISTRIBUTION':\n            await apiService.recordDistribution(data);\n            break;\n          default:\n            console.warn('Unknown action type:', action.action_type);\n        }\n        await offlineService.markActionSynced(action.id);\n      } catch (error) {\n        console.error('Sync failed for action:', action.id, error);\n      }\n    }\n  },\n  // Setup sync listeners / إعداد مستمعي المزامنة\n  setupSyncListeners(apiService) {\n    // Listen for online/offline events\n    window.addEventListener('online', () => {\n      console.log('Back online, syncing data...');\n      this.syncPendingActions(apiService);\n    });\n    window.addEventListener('offline', () => {\n      console.log('Gone offline, storing actions locally...');\n    });\n\n    // Periodic sync when online\n    setInterval(() => {\n      if (this.isOnline()) {\n        this.syncPendingActions(apiService);\n      }\n    }, 30000); // Sync every 30 seconds\n  }\n};\nexport default db;","map":{"version":3,"names":["Dexie","OfflineDatabase","constructor","version","stores","projects","users","transactions","reports","distributions","organisations","syncQueue","offlineActions","db","offlineService","cacheProjects","clear","bulkAdd","error","console","warn","cacheUsers","cacheOrganisations","getCachedProjects","toArray","getCachedUsers","getCachedOrganisations","storeOfflineAction","actionType","data","action","action_type","JSON","stringify","timestamp","Date","toISOString","is_synced","id","add","getPendingSyncActions","where","equals","markActionSynced","actionId","update","storeDraft","formType","draft","type","retries","getDrafts","clearSyncedDrafts","syncedActions","idsToDelete","map","length","bulkDelete","hasOfflineData","projectsCount","count","usersCount","clearAllData","syncService","isOnline","navigator","onLine","syncPendingActions","apiService","pendingActions","parse","createProject","fundProject","submitReport","recordDistribution","setupSyncListeners","window","addEventListener","log","setInterval"],"sources":["C:/Users/ajang/OneDrive/Desktop/Capstone_project_AidTrace_SS/frontend/src/services/offlineService.js"],"sourcesContent":["import Dexie from 'dexie';\n\n// Offline database for caching / قاعدة بيانات غير متصلة للتخزين المؤقت\nclass OfflineDatabase extends Dexie {\n  constructor() {\n    super('AidTraceDB');\n    \n    this.version(1).stores({\n      projects: '++id, title, status, organisation, location',\n      users: '++id, username, email, role, organisation',\n      transactions: '++id, project_id, donor_id, amount, is_synced',\n      reports: '++id, project_id, submitted_by, type, title, is_synced',\n      distributions: '++id, project_id, field_officer_id, aid_type, is_synced',\n      organisations: '++id, name, type, registration_status',\n      syncQueue: '++id, type, timestamp, retries',\n      offlineActions: '++id, action_type, timestamp, is_synced'\n    });\n  }\n}\n\nconst db = new OfflineDatabase();\n\n// Offline service functions / وظائف الخدمة غير المتصلة\nexport const offlineService = {\n  // Cache data / تخزين البيانات مؤقتاً\n  async cacheProjects(projects) {\n    try {\n      await db.projects.clear();\n      await db.projects.bulkAdd(projects);\n    } catch (error) {\n      console.warn('Failed to cache projects:', error);\n    }\n  },\n\n  async cacheUsers(users) {\n    try {\n      await db.users.clear();\n      await db.users.bulkAdd(users);\n    } catch (error) {\n      console.warn('Failed to cache users:', error);\n    }\n  },\n\n  async cacheOrganisations(organisations) {\n    try {\n      await db.organisations.clear();\n      await db.organisations.bulkAdd(organisations);\n    } catch (error) {\n      console.warn('Failed to cache organisations:', error);\n    }\n  },\n\n  // Get cached data / الحصول على البيانات المخزنة مؤقتاً\n  async getCachedProjects() {\n    try {\n      return await db.projects.toArray();\n    } catch (error) {\n      console.warn('Failed to get cached projects:', error);\n      return [];\n    }\n  },\n\n  async getCachedUsers() {\n    try {\n      return await db.users.toArray();\n    } catch (error) {\n      console.warn('Failed to get cached users:', error);\n      return [];\n    }\n  },\n\n  async getCachedOrganisations() {\n    try {\n      return await db.organisations.toArray();\n    } catch (error) {\n      console.warn('Failed to get cached organisations:', error);\n      return [];\n    }\n  },\n\n  // Store offline actions / تخزين الإجراءات غير المتصلة\n  async storeOfflineAction(actionType, data) {\n    try {\n      const action = {\n        action_type: actionType,\n        data: JSON.stringify(data),\n        timestamp: new Date().toISOString(),\n        is_synced: false\n      };\n      \n      const id = await db.offlineActions.add(action);\n      return { ...action, id };\n    } catch (error) {\n      console.warn('Failed to store offline action:', error);\n      return null;\n    }\n  },\n\n  // Get pending sync actions / الحصول على الإجراءات المعلقة للمزامنة\n  async getPendingSyncActions() {\n    try {\n      return await db.offlineActions.where('is_synced').equals(false).toArray();\n    } catch (error) {\n      console.warn('Failed to get pending sync actions:', error);\n      return [];\n    }\n  },\n\n  // Mark action as synced / تحديد الإجراء كمتزامن\n  async markActionSynced(actionId) {\n    try {\n      await db.offlineActions.update(actionId, { is_synced: true });\n    } catch (error) {\n      console.warn('Failed to mark action as synced:', error);\n    }\n  },\n\n  // Store form draft / تخزين مسودة النموذج\n  async storeDraft(formType, data) {\n    try {\n      const draft = {\n        type: formType,\n        data: JSON.stringify(data),\n        timestamp: new Date().toISOString(),\n        retries: 0\n      };\n      \n      const id = await db.syncQueue.add(draft);\n      return { ...draft, id };\n    } catch (error) {\n      console.warn('Failed to store draft:', error);\n      return null;\n    }\n  },\n\n  // Get form drafts / الحصول على مسودات النماذج\n  async getDrafts(formType) {\n    try {\n      return await db.syncQueue.where('type').equals(formType).toArray();\n    } catch (error) {\n      console.warn('Failed to get drafts:', error);\n      return [];\n    }\n  },\n\n  // Clear synced drafts / مسح المسودات المتزامنة\n  async clearSyncedDrafts() {\n    try {\n      const syncedActions = await db.offlineActions.where('is_synced').equals(true).toArray();\n      const idsToDelete = syncedActions.map(action => action.id);\n      if (idsToDelete.length > 0) {\n        await db.offlineActions.bulkDelete(idsToDelete);\n      }\n    } catch (error) {\n      console.warn('Failed to clear synced drafts:', error);\n    }\n  },\n\n  // Check if data exists offline / التحقق من وجود البيانات غير متصلة\n  async hasOfflineData() {\n    try {\n      const projectsCount = await db.projects.count();\n      const usersCount = await db.users.count();\n      return projectsCount > 0 || usersCount > 0;\n    } catch (error) {\n      console.warn('Failed to check offline data:', error);\n      return false;\n    }\n  },\n\n  // Clear all offline data / مسح جميع البيانات غير المتصلة\n  async clearAllData() {\n    try {\n      await db.projects.clear();\n      await db.users.clear();\n      await db.transactions.clear();\n      await db.reports.clear();\n      await db.distributions.clear();\n      await db.organisations.clear();\n      await db.syncQueue.clear();\n      await db.offlineActions.clear();\n    } catch (error) {\n      console.warn('Failed to clear all data:', error);\n    }\n  }\n};\n\n// Sync service for online/offline synchronization / خدمة المزامنة للمزامنة المتصلة/غير المتصلة\nexport const syncService = {\n  // Check online status / التحقق من حالة الاتصال\n  isOnline() {\n    return navigator.onLine;\n  },\n\n  // Sync pending actions when online / مزامنة الإجراءات المعلقة عند الاتصال\n  async syncPendingActions(apiService) {\n    if (!this.isOnline()) return;\n\n    const pendingActions = await offlineService.getPendingSyncActions();\n    \n    for (const action of pendingActions) {\n      try {\n        const data = JSON.parse(action.data);\n        \n        switch (action.action_type) {\n          case 'CREATE_PROJECT':\n            await apiService.createProject(data);\n            break;\n          case 'FUND_PROJECT':\n            await apiService.fundProject(data);\n            break;\n          case 'SUBMIT_REPORT':\n            await apiService.submitReport(data);\n            break;\n          case 'RECORD_DISTRIBUTION':\n            await apiService.recordDistribution(data);\n            break;\n          default:\n            console.warn('Unknown action type:', action.action_type);\n        }\n        \n        await offlineService.markActionSynced(action.id);\n      } catch (error) {\n        console.error('Sync failed for action:', action.id, error);\n      }\n    }\n  },\n\n  // Setup sync listeners / إعداد مستمعي المزامنة\n  setupSyncListeners(apiService) {\n    // Listen for online/offline events\n    window.addEventListener('online', () => {\n      console.log('Back online, syncing data...');\n      this.syncPendingActions(apiService);\n    });\n\n    window.addEventListener('offline', () => {\n      console.log('Gone offline, storing actions locally...');\n    });\n\n    // Periodic sync when online\n    setInterval(() => {\n      if (this.isOnline()) {\n        this.syncPendingActions(apiService);\n      }\n    }, 30000); // Sync every 30 seconds\n  }\n};\n\nexport default db;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}